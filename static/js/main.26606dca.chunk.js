(this["webpackJsonpmoogle-gaps-axpe"]=this["webpackJsonpmoogle-gaps-axpe"]||[]).push([[0],{30:function(e,t,a){},31:function(e,t,a){},40:function(e,t,a){"use strict";a.r(t);var n=a(0),o=a.n(n),c=a(3),r=a.n(c),l=(a(30),a(31),a(4)),s=a(7),d=a(13),i=a(24),u=a(10),p=a(11),m=a(12),j=a(25),b=a(22),g=a(2),O=function(e){Object(j.a)(a,e);var t=Object(b.a)(a);function a(e){var n;return Object(u.a)(this,a),(n=t.call(this,e)).onPlaceChanged=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:n.props,t=e.map,a=e.addplace,o=n.autoComplete.getPlace();o.geometry&&(o.geometry.viewport?t.fitBounds(o.geometry.viewport):(t.setCenter(o.geometry.location),t.setZoom(17)),a(o),n.searchInput.blur())},n.clearSearchBox=n.clearSearchBox.bind(Object(m.a)(n)),n}return Object(p.a)(a,[{key:"componentDidMount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.map,a=e.mapApi,n={types:["establishment"]};this.autoComplete=new a.places.Autocomplete(this.searchInput,n),this.autoComplete.addListener("place_changed",this.onPlaceChanged),this.autoComplete.bindTo("bounds",t)}},{key:"componentWillUnmount",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,t=e.mapApi;t.event.clearInstanceListeners(this.searchInput)}},{key:"clearSearchBox",value:function(){this.searchInput.value=""}},{key:"render",value:function(){var e=this;return Object(g.jsx)("div",{className:"SearchBar-wrapper",children:Object(g.jsx)("input",{className:"search-input",ref:function(t){e.searchInput=t},type:"text",onFocus:this.clearSearchBox,placeholder:"Search places..."})})}}]),a}(n.Component),h=function(e){var t=e.lat,a=e.lng;return Object(g.jsx)("div",{className:"Marker-wrapper",lat:t,lng:a})};var v=function(e){var t=e.name,a=e.address;return Object(g.jsxs)("div",{className:"info-wrapper",children:[Object(g.jsx)("div",{className:"map-details",children:Object(g.jsx)("span",{"data-testid":"map-name",children:t})}),Object(g.jsx)("div",{className:"map-subdetails",children:Object(g.jsx)("span",{children:a})})]})},f="STORE_MARKER",M=a(6),x=a(20),y=a(21),w=a(23),A=[y.a],S=Object(M.createStore)((function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{arr:[]},t=arguments.length>1?arguments[1]:void 0,a=t.type,n=t.payload;switch(a){case f:var o=n.lat,c=n.lng,r=n.places;return{arr:[].concat(Object(w.a)(e.arr),[{lat:o,lng:c,places:r}])};default:return e}}),Object(x.composeWithDevTools)(M.applyMiddleware.apply(void 0,A))),C={mapApiLoaded:!1,mapInstance:null,mapApi:null,geoCoder:null,places:[],center:[],marginBounds:[],zoom:9,address:"",draggable:!0,lat:null,lng:null};var I=function(){var e=Object(n.useState)({stateModel:C}),t=Object(s.a)(e,2),a=t[0],o=t[1],c=Object(n.useState)(!1),r=Object(s.a)(c,2),u=r[0],p=r[1],m=Object(n.useState)(!1),j=Object(s.a)(m,2),b=j[0],M=j[1],x=Object(n.useState)({lat:"",lng:"",name:"",address:""}),y=Object(s.a)(x,2),w=y[0],A=y[1],I=Object(n.useState)({arr:[{lat:"",lng:"",places:""}]}),k=Object(s.a)(I,2),N=k[0],B=k[1],z=Object(d.b)();Object(n.useEffect)((function(){"geolocation"in navigator&&navigator.geolocation.getCurrentPosition((function(e){o((function(t){return{stateModel:Object(l.a)(Object(l.a)({},t.stateModel),{},{center:[e.coords.latitude,e.coords.longitude],lat:e.coords.latitude,lng:e.coords.longitude})}}))}))}),[]),Object(n.useEffect)((function(){u&&((new a.stateModel.mapApi.Geocoder).geocode({location:{lat:a.stateModel.lat,lng:a.stateModel.lng}},(function(e,t){"OK"===t?e[0]?o((function(t){return{stateModel:Object(l.a)(Object(l.a)({},t.stateModel),{},{address:e[0].formatted_address,zoom:12})}})):window.alert("No results found"):window.alert("Geocoder failed due to: "+t)})),p(!1))}),[u]),Object(n.useEffect)((function(){var e,t;b&&(z(function(e){return function(t){return t({type:f,payload:e}),Promise.resolve()}}(a.stateModel)),A({name:null===(e=a.stateModel.places[0])||void 0===e?void 0:e.name,address:null===(t=a.stateModel.places[0])||void 0===t?void 0:t.formatted_address}),M(!1));B((function(){return S.getState()}))}),[b]);var L=a.stateModel,E=(L.places,L.mapApiLoaded),_=L.mapInstance,P=L.mapApi,R=function(e){var t=e.center,a=e.zoom;o((function(e){return{stateModel:Object(l.a)(Object(l.a)({},e.stateModel),{},{center:t,zoom:a})}}))};return Object(g.jsxs)("div",{className:"canvasMap",children:[E&&Object(g.jsx)("div",{children:Object(g.jsx)(O,{map:_,mapApi:P,addplace:function(e){o((function(t){return{stateModel:Object(l.a)(Object(l.a)({},t.stateModel),{},{places:[e],lat:e.geometry.location.lat(),lng:e.geometry.location.lng()})}})),p(!0),M(!0)}})}),Object(g.jsx)(i.a,{center:a.stateModel.center,defaultCenter:{lat:0,lng:0},zoom:a.stateModel.zoom,draggable:a.stateModel.draggable,onChange:function(){return R},bootstrapURLKeys:{key:"AIzaSyDre9x4CTbdRH3Q6UYUH_aqtO4s-qWrtlo",libraries:["places","geometry"]},yesIWantToUseGoogleMapApiInternals:!0,onGoogleApiLoaded:function(e){return function(e,t){o((function(a){return{stateModel:Object(l.a)(Object(l.a)({},a.stateModel),{},{mapApiLoaded:!0,mapInstance:e,mapApi:t})}})),p(!0)}(e.map,e.maps)},children:N.arr.length>1?N.arr.map((function(e,t){return Object(g.jsx)(h,{lat:e.lat,lng:e.lng,onClick:function(){var t,a;return A({name:null===(t=e.places[0])||void 0===t?void 0:t.name,address:null===(a=e.places[0])||void 0===a?void 0:a.formatted_address})}},t)})):Object(g.jsx)(h,{lat:a.stateModel.lat,lng:a.stateModel.lng})}),Object(g.jsx)(v,{name:w.name,address:w.address})]})};var k=function(){return Object(g.jsx)("div",{className:"App-wrapper",children:Object(g.jsx)(I,{})})};r.a.render(Object(g.jsx)(d.a,{store:S,children:Object(g.jsx)(o.a.StrictMode,{children:Object(g.jsx)(k,{})})}),document.getElementById("root"))}},[[40,1,2]]]);
//# sourceMappingURL=main.26606dca.chunk.js.map